<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stoichiometry Involving Explosive Reactions — Thermal Decomposition of Ammonium Nitrate</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --accent-color: #e74c3c;
            --light-color: #f8f9fa;
            --dark-color: #2c3e50;
            --warning-color: #f39c12;
            --success-color: #27ae60;
            --danger-color: #e74c3c;
            --explosive-color: #ff5722;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f7fa;
            background-image: linear-gradient(to bottom, rgba(240, 249, 255, 0.5), rgba(255, 255, 255, 0.9));
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--explosive-color), var(--primary-color));
            color: white;
            padding: 2rem 0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('https://picsum.photos/seed/ammonium-nitrate/1200/200.jpg');
            background-size: cover;
            background-position: center;
            opacity: 0.2;
            z-index: -1;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .header-title h1 {
            font-size: 2.2rem;
            margin-bottom: 0.5rem;
        }
        
        .header-title p {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .progress-container {
            background-color: rgba(255,255,255,0.2);
            border-radius: 10px;
            padding: 0.5rem 1rem;
            margin-top: 1rem;
            width: 100%;
        }
        
        .progress-bar {
            height: 10px;
            background-color: rgba(255,255,255,0.3);
            border-radius: 5px;
            overflow: hidden;
            margin-top: 0.5rem;
        }
        
        .progress {
            height: 100%;
            background-color: white;
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .progress-text {
            text-align: center;
            font-size: 0.9rem;
        }
        
        main {
            padding: 2rem 0;
        }
        
        .collapsible-container {
            margin-bottom: 1rem;
        }
        
        .collapsible {
            background-color: white;
            color: var(--dark-color);
            cursor: pointer;
            padding: 1rem 1.5rem;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 1.1rem;
            font-weight: 500;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .collapsible:hover {
            background-color: #f0f7ff;
        }
        
        .collapsible.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        .collapsible.completed {
            background-color: var(--secondary-color);
            color: white;
        }
        
        .collapsible-icon {
            transition: transform 0.3s ease;
        }
        
        .collapsible.active .collapsible-icon {
            transform: rotate(180deg);
        }
        
        .content {
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease, padding 0.5s ease;
            background-color: white;
            border-radius: 0 0 8px 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .content.show {
            padding: 2rem;
            max-height: 2000px;
        }
        
        .section-title {
            font-size: 1.8rem;
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--light-color);
        }
        
        .learning-objectives {
            background-color: #f0f7ff;
            border-left: 4px solid var(--primary-color);
            padding: 1.5rem;
            margin-bottom: 2rem;
            border-radius: 0 5px 5px 0;
        }
        
        .learning-objectives h3 {
            color: var(--primary-color);
            margin-bottom: 1rem;
        }
        
        .learning-objectives ul {
            padding-left: 1.5rem;
        }
        
        .learning-objectives li {
            margin-bottom: 0.5rem;
        }
        
        .definition-card {
            background-color: var(--light-color);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-left: 4px solid var(--accent-color);
        }
        
        .definition-card h4 {
            color: var(--accent-color);
            margin-bottom: 0.5rem;
        }
        
        .formula {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
            text-align: center;
            font-size: 1.2rem;
        }
        
        .interactive-box {
            background-color: #f0f7ff;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        
        .interactive-box h4 {
            color: var(--primary-color);
            margin-bottom: 1rem;
        }
        
        .calculator {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .input-group {
            flex: 1;
            min-width: 200px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        
        .input-group input, .input-group select {
            width: 100%;
            padding: 0.7rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        .btn {
            padding: 0.7rem 1.5rem;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .btn-secondary {
            background-color: var(--secondary-color);
        }
        
        .btn-secondary:hover {
            background-color: #27ae60;
        }
        
        .result-box {
            margin-top: 1.5rem;
            padding: 1rem;
            background-color: white;
            border-radius: 5px;
            border: 1px solid #e9ecef;
            display: none;
        }
        
        .result-box.show {
            display: block;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .experiment-steps {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        
        .experiment-steps h4 {
            color: var(--primary-color);
            margin-bottom: 1rem;
        }
        
        .step {
            display: flex;
            margin-bottom: 1.5rem;
        }
        
        .step-number {
            background-color: var(--primary-color);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 1rem;
            flex-shrink: 0;
        }
        
        .step-content {
            flex: 1;
        }
        
        .step-content h5 {
            margin-bottom: 0.5rem;
            color: var(--dark-color);
        }
        
        .chemical-equation {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 5px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            text-align: center;
            font-size: 1.3rem;
            font-family: 'Courier New', monospace;
        }
        
        .equation-balancer {
            background-color: #f0f7ff;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        
        .equation-input {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            margin: 1.5rem 0;
            flex-wrap: wrap;
        }
        
        .equation-input input {
            width: 80px;
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            text-align: center;
            font-family: 'Courier New', monospace;
            font-size: 1.1rem;
        }
        
        .equation-arrow {
            font-size: 1.5rem;
            color: var(--dark-color);
        }
        
        .limewater-test {
            display: flex;
            align-items: center;
            justify-content: space-around;
            flex-wrap: wrap;
            margin: 2rem 0;
        }
        
        .test-tube {
            width: 100px;
            height: 200px;
            background: linear-gradient(to bottom, rgba(255,255,255,0.2), rgba(255,255,255,0.8));
            border: 2px solid #ddd;
            border-radius: 0 0 50px 50px;
            position: relative;
            margin: 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            overflow: hidden;
        }
        
        .test-tube::before {
            content: "";
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 20px;
            background-color: #ddd;
            border-radius: 5px 5px 0 0;
        }
        
        .liquid {
            width: 100%;
            height: 60%;
            background-color: rgba(173, 216, 230, 0.7);
            transition: background-color 1s ease;
        }
        
        .liquid.milky {
            background-color: rgba(255, 255, 255, 0.9);
        }
        
        .test-label {
            margin-top: 1rem;
            text-align: center;
            font-weight: 500;
        }
        
        .quiz-container {
            background-color: #f0f7ff;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        
        .quiz-question {
            margin-bottom: 1.5rem;
        }
        
        .quiz-question h4 {
            margin-bottom: 1rem;
            color: var(--primary-color);
        }
        
        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .quiz-option {
            padding: 0.7rem;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .quiz-option:hover {
            background-color: #e9ecef;
        }
        
        .quiz-option.selected {
            background-color: var(--primary-color);
            color: white;
        }
        
        .quiz-option.correct {
            background-color: var(--success-color);
            color: white;
        }
        
        .quiz-option.incorrect {
            background-color: var(--danger-color);
            color: white;
        }
        
        .quiz-feedback {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 5px;
            display: none;
        }
        
        .quiz-feedback.show {
            display: block;
        }
        
        .quiz-feedback.correct {
            background-color: rgba(39, 174, 96, 0.1);
            border: 1px solid var(--success-color);
            color: var(--success-color);
        }
        
        .quiz-feedback.incorrect {
            background-color: rgba(231, 76, 60, 0.1);
            border: 1px solid var(--danger-color);
            color: var(--danger-color);
        }
        
        .footer {
            background-color: var(--dark-color);
            color: white;
            padding: 2rem 0;
            margin-top: 3rem;
        }
        
        .footer-content {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
        }
        
        .footer-section {
            flex: 1;
            min-width: 200px;
            margin-bottom: 1rem;
        }
        
        .footer-section h4 {
            margin-bottom: 1rem;
            color: var(--secondary-color);
        }
        
        .footer-section ul {
            list-style: none;
        }
        
        .footer-section ul li {
            margin-bottom: 0.5rem;
        }
        
        .footer-section a {
            color: #ccc;
            text-decoration: none;
            transition: color 0.3s ease;
        }
        
        .footer-section a:hover {
            color: white;
        }
        
        .copyright {
            text-align: center;
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(255,255,255,0.1);
            color: #ccc;
            font-size: 0.9rem;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 1rem 1.5rem;
            border-radius: 5px;
            color: white;
            font-weight: 500;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            z-index: 1001;
            display: none;
            animation: notificationSlideIn 0.3s ease;
        }
        
        @keyframes notificationSlideIn {
            from { opacity: 0; transform: translateX(50px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .notification.show {
            display: block;
        }
        
        .notification.success {
            background-color: var(--success-color);
        }
        
        .notification.error {
            background-color: var(--danger-color);
        }
        
        .notification.warning {
            background-color: var(--warning-color);
        }
        
        .lo-badge {
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            margin-left: 0.5rem;
        }
        
        .seashell-image {
            width: 100%;
            max-width: 300px;
            height: auto;
            border-radius: 8px;
            margin: 1rem 0;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .table-container {
            overflow-x: auto;
            margin: 1.5rem 0;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1rem;
        }
        
        th, td {
            padding: 0.8rem;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background-color: var(--light-color);
            font-weight: 500;
            color: var(--dark-color);
        }
        
        tr:hover {
            background-color: #f8f9fa;
        }
        
        /* Chemical formatting */
        .chemical {
            font-family: 'Courier New', monospace;
        }
        
        .subscript {
            font-size: 0.8em;
            vertical-align: sub;
        }
        
        .superscript {
            font-size: 0.8em;
            vertical-align: super;
        }
        
        .state {
            font-style: italic;
            font-size: 0.9em;
        }
        
        .explosion-visual {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 2rem 0;
            position: relative;
        }
        
        .explosion-container {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background-color: #333;
            position: relative;
            overflow: hidden;
        }
        
        .explosion-particle {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: var(--warning-color);
            opacity: 0;
        }
        
        @keyframes explode {
            0% {
                transform: translate(0, 0) scale(1);
                opacity: 0;
            }
            50% {
                transform: translate(0, 0) scale(1.5);
                opacity: 1;
            }
            100% {
                transform: translate(var(--tx, var(--ty)) scale(0.5);
                opacity: 0;
            }
        }
        
        .explosion-active .explosion-particle {
            animation: explode 1s ease-out forwards;
        }
        
        @media (max-width: 768px) {
            .header-title h1 {
                font-size: 1.8rem;
            }
            
            .content {
                padding: 1rem;
            }
            
            .calculator {
                flex-direction: column;
            }
            
            .equation-input {
                flex-direction: column;
                align-items: center;
            }
            
            .equation-arrow {
                transform: rotate(90deg);
                margin: 0.5rem 0;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="header-title">
                    <h1>Stoichiometry Involving Explosive Reactions</h1>
                    <p>Physical Sciences / Chemistry - Thermal Decomposition of Ammonium Nitrate</p>
                </div>
            </div>
            <div class="progress-container">
                <div class="progress-text">Lesson Progress: <span id="progress-text">0%</span></div>
                <div class="progress-bar">
                    <div class="progress" id="progress-bar"></div>
                </div>
            </div>
        </div>
    </header>
    
    <main>
        <div class="container">
            <!-- Introduction Section -->
            <div class="collapsible-container">
                <button class="collapsible" onclick="toggleCollapsible(this)">
                    <span>Introduction</span>
                    <i class="fas fa-chevron-down collapsible-icon"></i>
                </button>
                <div class="content">
                    <h2 class="section-title">Introduction</h2>
                    <p>Explosions in mining rely on chemical reactions that rapidly produce huge amounts of gas. These gases expand outward, breaking rock into smaller pieces. One of the most common industrial explosives is <strong>ANFO (Ammonium Nitrate Fuel Oil)</strong>, made from ammonium nitrate.</p>
                    
                    <p>To understand why it is so effective, we must apply stoichiometry, gas laws, and Avogadro's hypothesis to the thermal decomposition of ammonium nitrate.</p>
                    
                    <p>Today's lesson will connect <strong>real industrial applications</strong> with the theoretical chemistry behind them.</p>
                    
                    <div style="display: flex; align-items: center; justify-content: space-around; flex-wrap: wrap; margin: 2rem 0;">
                        <div>
                            <img src="https://picsum.photos/seed/ammonium-nitrate/300/200.jpg" alt="Ammonium Nitrate" class="seashell-image">
                        </div>
                        <div style="max-width: 500px;">
                            <h3>Why Study Explosive Reactions?</h3>
                            <ul>
                                <li>Industrial applications in mining</li>
                                <li>Understanding gas expansion principles</li>
                                <li>Safety considerations in chemical handling</li>
                                <li>Real-world stoichiometry applications</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Learning Objectives Section -->
            <div class="collapsible-container">
                <button class="collapsible" onclick="toggleCollapsible(this)">
                    <span>Learning Objectives</span>
                    <i class="fas fa-chevron-down collapsible-icon"></i>
                </button>
                <div class="content">
                    <h2 class="section-title">Learning Objectives</h2>
                    <div class="learning-objectives">
                        <h3>At the end of this lesson, you should be able to:</h3>
                        <ul>
                            <li>Perform stoichiometric calculations involving reactions that produce large amounts of gas, leading to massive increases in volume (explosion concept). <span class="lo-badge">LO 1</span></li>
                            <li>Apply <strong>Avogadro's Hypothesis</strong> to gaseous reactions: <span class="lo-badge">LO 2</span></li>
                            <li>Describe the chemical properties, uses, and dangers of <strong>ammonium nitrate (NH₄NO₃)</strong>. <span class="lo-badge">LO 3</span></li>
                            <li>Explain why ammonium nitrate is used in explosives such as <strong>ANFO</strong>. <span class="lo-badge">LO 4</span></li>
                            <li>Calculate the <strong>volume of gases produced</strong> during the thermal decomposition of ammonium nitrate. <span class="lo-badge">LO 5</span></li>
                            <li>Determine the <strong>mass of water produced</strong> in the decomposition reaction given a mass of NH₄NO₃. <span class="lo-badge">LO 6</span></li>
                            <li>Identify <strong>two major uses</strong> of ammonium nitrate. <span class="lo-badge">LO 7</span></li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Key Definitions Section -->
            <div class="collapsible-container">
                <button class="collapsible" onclick="toggleCollapsible(this)">
                    <span>Key Definitions and Scientific Principles</span>
                    <i class="fas fa-chevron-down collapsible-icon"></i>
                </button>
                <div class="content">
                    <h2 class="section-title">Key Definitions and Scientific Principles</h2>
                    
                    <div class="definition-card">
                        <h4>Stoichiometry</h4>
                        <p>The quantitative study of reactants and products in a chemical reaction based on mole ratios.</p>
                    </div>
                    
                    <div class="definition-card">
                        <h4>Avogadro's Hypothesis</h4>
                        <p>At the same temperature and pressure, <strong>equal volumes of gases contain equal numbers of moles</strong> of gas.</p>
                        <div class="formula">V ∝ n</div>
                    </div>
                    
                    <div class="definition-card">
                        <h4>Mole (n)</h4>
                        <p>The SI unit for amount of substance. 1 mole contains 6.022 × 10²³ particles.</p>
                    </div>
                    
                    <div class="definition-card">
                        <h4>Thermal Decomposition</h4>
                        <p>A reaction where a compound breaks down into simpler substances when heated.</p>
                    </div>
                    
                    <div class="definition-card">
                        <h4>Ammonium Nitrate (NH₄NO₃)</h4>
                        <ul>
                            <li>White crystalline solid</li>
                            <li>Strong oxidizing agent</li>
                            <li>Fertilizer (high nitrogen)</li>
                            <li>Used in explosives such as <strong>ANFO – Ammonium Nitrate Fuel Oil</strong></li>
                            <li>Can violently decompose when heated or ignited</li>
                        </ul>
                        <div class="formula">NH₄NO₃(s) → N₂O(g) + 2H₂O(g)</div>
                    </div>
                    
                    <div class="definition-card">
                        <h4>Explosive Reaction Principle</h4>
                        <p>Explosives generate <strong>large volumes of gaseous products rapidly</strong>, causing a sudden increase in pressure → shockwave → rock fragmentation in mining.</p>
                    </div>
                </div>
            </div>
            
            <!-- Properties and Uses Section -->
            <div class="collapsible-container">
                <button class="collapsible" onclick="toggleCollapsible(this)">
                    <span>Properties and Uses of Ammonium Nitrate <span class="lo-badge">LO 3</span><span class="lo-badge">LO 4</span></span>
                    <i class="fas fa-chevron-down collapsible-icon"></i>
                </button>
                <div class="content">
                    <h2 class="section-title">Properties and Uses of Ammonium Nitrate (LO 3, LO 4)</h2>
                    
                    <div class="definition-card">
                        <h4>Chemical Features</h4>
                        <div class="formula">Formula: NH₄NO₃</div>
                        <ul>
                            <li>Solid at room temperature</li>
                            <li>Strong oxidizer → supplies oxygen to burn fuel</li>
                            <li>Decomposes when heated to produce gases N₂O and H₂O</li>
                        </ul>
                    </div>
                    
                    <div class="definition-card">
                        <h4>Main Uses</h4>
                        <div style="display: flex; justify-content: space-between; flex-wrap: wrap; gap: 1rem;">
                            <div style="flex: 1; min-width: 200px;">
                                <h5>1. Fertilizer</h5>
                                <p>High nitrogen content promotes plant growth</p>
                            </div>
                            <div style="flex: 1; min-width: 200px;">
                                <h5>2. Explosives</h5>
                                <p>ANFO used in mining operations</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="definition-card">
                        <h4>Why It Is Dangerous</h4>
                        <ul>
                            <li>Heating or ignition may cause explosive decomposition</li>
                            <li>Reacts with reducing or combustible materials</li>
                            <li>Rapid gas expansion causes pressure build-up → explosion</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Thermal Decomposition Section -->
            <div class="collapsible-container">
                <button class="collapsible" onclick="toggleCollapsible(this)">
                    <span>Thermal Decomposition Reaction <span class="lo-badge">LO 5</span></span>
                    <i class="fas fa-chevron-down collapsible-icon"></i>
                </button>
                <div class="content">
                    <h2 class="section-title">Thermal Decomposition Reaction (LO 5)</h2>
                    
                    <p>The decomposition reaction is:</p>
                    
                    <div class="chemical-equation">
                        NH₄NO₃(s) → N₂O(g) + 2H₂O(g)
                    </div>
                    
                    <p>1 mole solid → 1 mole N₂O (gas) + 2 moles H₂O (gas)</p>
                    <p>Total gas produced per mole = <strong>3 moles of gas</strong></p>
                    
                    <p>This shows why ammonium nitrate can create a large increase in gas volume (explosive potential).</p>
                    
                    <div class="interactive-box">
                        <h4>Interactive Explosion Visualization</h4>
                        <p>Click the button below to visualize the rapid gas expansion that occurs during decomposition:</p>
                        
                        <div class="explosion-visual">
                            <div class="explosion-container" id="explosion-container">
                                <div class="explosion-particle" style="top: 95px; left: 95px;"></div>
                                <div class="explosion-particle" style="top: 50px; left: 140px;"></div>
                                <div class="explosion-particle" style="top: 140px; left: 95px;"></div>
                                <div class="explosion-particle" style="top: 50px; left: 50px;"></div>
                            </div>
                            <button class="btn" id="trigger-explosion">Trigger Explosion</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Avogadro's Hypothesis Section -->
            <div class="collapsible-container">
                <button class="collapsible" onclick="toggleCollapsible(this)">
                    <span>Connection to Avogadro's Hypothesis <span class="lo-badge">LO 2</span></span>
                    <i class="fas fa-chevron-down collapsible-icon"></i>
                </button>
                <div class="content">
                    <h2 class="section-title">Connection to Avogadro's Hypothesis (LO 2)</h2>
                    
                    <p>Since <strong>V ∝ n</strong>, and 3 moles of gas form from one mole of solid NH₄NO₃, there is a <strong>massive increase in gas volume</strong>.</p>
                    
                    <p>Thus ammonium nitrate explosions rely on:</p>
                    <ul>
                        <li>Sudden creation of many gas molecules</li>
                        <li>Rapid expansion of gas</li>
                        <li>High pressure → fragmentation of rock</li>
                    </ul>
                    
                    <div class="interactive-box">
                        <h4>Gas Volume Calculator</h4>
                        <p>Calculate the volume of gas produced from a given amount of NH₄NO₃ at STP:</p>
                        
                        <div class="calculator">
                            <div class="input-group">
                                <label for="nh4no3-moles">Moles of NH₄NO₃</label>
                                <input type="number" id="nh4no3-moles" placeholder="Enter moles" step="any">
                            </div>
                            <div class="input-group">
                                <label>&nbsp;</label>
                                <button class="btn" id="calculate-gas-volume">Calculate Gas Volume</button>
                            </div>
                        </div>
                        
                        <div class="result-box" id="gas-volume-result">
                            <h4>Calculation Steps:</h4>
                            <div id="gas-volume-steps"></div>
                            <h4>Result:</h4>
                            <p id="gas-volume-value"></p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Stoichiometric Calculations Section -->
            <div class="collapsible-container">
                <button class="collapsible" onclick="toggleCollapsible(this)">
                    <span>Stoichiometric Calculations <span class="lo-badge">LO 1</span><span class="lo-badge">LO 5</span><span class="lo-badge">LO 6</span></span>
                    <i class="fas fa-chevron-down collapsible-icon"></i>
                </button>
                <div class="content">
                    <h2 class="section-title">Stoichiometric Calculations (LO 1, LO 5, LO 6)</h2>
                    
                    <div class="experiment-steps">
                        <h4>Example 1: Calculate the volume of each gas produced during decomposition of 0.75 kg of NH₄NO₃ at STP.</h4>
                        
                        <div class="step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h5>Convert mass to moles</h5>
                                <div class="formula">Molar mass of NH₄NO₃ = 80 g/mol</div>
                                <div class="formula">Mass = 0.75 kg = 750 g</div>
                                <div class="formula">n = 750/80 = 9.375 mol</div>
                            </div>
                        </div>
                        
                        <div class="step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h5>Use mole ratios</h5>
                                <div class="formula">From equation:</div>
                                <div class="formula">1 mol NH₄NO₃ → 1 mol N₂O</div>
                                <div class="formula">1 mol NH₄NO₃ → 2 mol H₂O</div>
                                <p>So for 9.375 mol NH₄NO₃:</p>
                                <div class="formula">Moles of N₂O = 9.375 mol</div>
                                <div class="formula">Moles of H₂O = 18.75 mol</div>
                            </div>
                        </div>
                        
                        <div class="step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h5>Convert moles to volumes at STP</h5>
                                <div class="formula">At STP, 1 mol of gas occupies 22.4 dm³</div>
                                <div class="formula">V(N₂O) = 9.375 × 22.4 = 210.0 dm³</div>
                                <div class="formula">V(H₂O) = 18.75 × 22.4 = 420.0 dm³</div>
                            </div>
                        </div>
                        
                        <div class="step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <h5>Total Gas Volume</h5>
                                <div class="formula">Total = 630.0 dm³ produced from 0.75 kg solid</div>
                                <p>→ Massive expansion → explosive force.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="experiment-steps">
                        <h4>Example 2: Determine the mass of water produced from decomposition of 25.0 g NH₄NO₃.</h4>
                        
                        <div class="step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h5>Convert mass to moles</h5>
                                <div class="formula">n = 25.0/80 = 0.3125 mol</div>
                            </div>
                        </div>
                        
                        <div class="step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h5>Mol ratio</h5>
                                <div class="formula">1 mol NH₄NO₃ → 2 mol H₂O</div>
                                <div class="formula">n(H₂O) = 2 × 0.3125 = 0.625 mol</div>
                            </div>
                        </div>
                        
                        <div class="step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h5>Convert moles to mass</h5>
                                <div class="formula">Molar mass of H₂O = 18 g/mol</div>
                                <div class="formula">m = nM = 0.625 × 18 = 11.25 g</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="interactive-box">
                        <h4>Interactive Calculator</h4>
                        <p>Calculate the mass of water produced from a given mass of NH₄NO₃:</p>
                        
                        <div class="calculator">
                            <div class="input-group">
                                <label for="nh4no3-mass-water">Mass of NH₄NO₃ (g)</label>
                                <input type="number" id="nh4no3-mass-water" placeholder="Enter mass" step="any">
                            </div>
                            <div class="input-group">
                                <label>&nbsp;</label>
                                <button class="btn" id="calculate-water-mass">Calculate Water Mass</button>
                            </div>
                        </div>
                        
                        <div class="result-box" id="water-mass-result">
                            <h4>Calculation Steps:</h4>
                            <div id="water-mass-steps"></div>
                            <h4>Result:</h4>
                            <p id="water-mass-value"></p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Why Ammonium Nitrate in Explosives Section -->
            <div class="collapsible-container">
                <button class="collapsible" onclick="toggleCollapsible(this)">
                    <span>Why Ammonium Nitrate Is Used in Explosives <span class="lo-badge">LO 4</span></span>
                    <i class="fas fa-chevron-down collapsible-icon"></i>
                </button>
                <div class="content">
                    <h2 class="section-title">Why Ammonium Nitrate Is Used in Explosives (LO 4)</h2>
                    
                    <div class="definition-card">
                        <h4>Key Advantages</h4>
                        <ul>
                            <li>Produces huge volumes of hot gases</li>
                            <li>Oxygen-rich → supports combustion</li>
                            <li>Cheap and easy to transport</li>
                            <li>Mixed with fuel oil → ANFO</li>
                            <li>Modifies detonation speeds of other explosives</li>
                        </ul>
                    </div>
                    
                    <p>When gases rapidly expand, they push rock apart → essential in mining.</p>
                    
                    <div style="display: flex; align-items: center; justify-content: space-around; flex-wrap: wrap; margin: 2rem 0;">
                        <div style="max-width: 300px; text-align: center;">
                            <img src="https://picsum.photos/seed/anfo-explosive/250/200.jpg" alt="ANFO Explosive" style="width: 100%; border-radius: 8px; margin-bottom: 1rem;">
                            <h5>ANFO Explosive</h5>
                        </div>
                        <div style="max-width: 300px; text-align: center;">
                            <img src="https://picsum.photos/seed/mining-explosion/250/200.jpg" alt="Mining Explosion" style="width: 100%; border-radius: 8px; margin-bottom: 1rem;">
                            <h5>Rock Fragmentation</h5>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Conclusion Section -->
            <div class="collapsible-container">
                <button class="collapsible" onclick="toggleCollapsible(this)">
                    <span>Conclusion</span>
                    <i class="fas fa-chevron-down collapsible-icon"></i>
                </button>
                <div class="content">
                    <h2 class="section-title">Conclusion</h2>
                    
                    <p>In this lesson, we connected chemical principles with real industrial applications. You discovered that ammonium nitrate, a common fertilizer, can release enormous quantities of gas when heated. This rapid expansion explains why it is widely used in mining explosives like ANFO. By applying stoichiometry and Avogadro's hypothesis, we calculated gas volumes and mass of products formed in these reactions. Understanding these reactions helps learners appreciate both the power and danger of chemical change.</p>
                    
                    <div class="interactive-box">
                        <h4>Key Takeaways</h4>
                        <ul>
                            <li>Stoichiometry allows us to predict amounts of products in chemical reactions</li>
                            <li>Avogadro's hypothesis connects gas volume to number of particles</li>
                            <li>Ammonium nitrate's explosive properties come from rapid gas production</li>
                            <li>Real-world applications rely on theoretical chemistry principles</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- End-of-Lesson Questions Section -->
            <div class="collapsible-container">
                <button class="collapsible" onclick="toggleCollapsible(this)">
                    <span>End-of-Lesson Questions</span>
                    <i class="fas fa-chevron-down collapsible-icon"></i>
                </button>
                <div class="content">
                    <h2 class="section-title">End-of-Lesson Questions</h2>
                    
                    <div class="quiz-container">
                        <div class="quiz-question">
                            <h4>Question 1: Explain why producing a large number of gas molecules in a short time results in an explosion.</h4>
                            <div class="quiz-options">
                                <div class="quiz-option" data-question="1" data-option="A">A. Rapid gas expansion creates a pressure wave that breaks apart surrounding materials</div>
                                <div class="quiz-option" data-question="1" data-option="B">B. Gas molecules are inherently explosive</div>
                                <div class="quiz-option" data-question="1" data-option="C">C. Gas molecules are hotter than the surrounding air</div>
                                <div class="quiz-option" data-question="1" data-option="D">D. Gas molecules are lighter than the surrounding air</div>
                            </div>
                            <div class="quiz-feedback" id="feedback-1"></div>
                        </div>
                        
                        <div class="quiz-question">
                            <h4>Question 2: State Avogadro's hypothesis in your own words.</h4>
                            <div class="quiz-options">
                                <div class="quiz-option" data-question="2" data-option="A">A. At constant temperature and pressure, equal volumes of gases contain equal numbers of moles</div>
                                <div class="quiz-option" data-question="2" data-option="B">At constant temperature and pressure, equal masses of gases contain equal numbers of moles</div>
                                <div class="quiz-option" data-question="2" data-option="C">At constant temperature and pressure, equal volumes of gases contain equal numbers of particles</div>
                                <div class="quiz-option" data-question="2" data-option="D">At constant temperature and pressure, equal volumes of gases contain equal numbers of atoms</div>
                            </div>
                            <div class="quiz-feedback" id="feedback-2"></div>
                        </div>
                        
                        <div class="quiz-question">
                            <h4>Question 3: Why is ammonium nitrate considered a strong oxidizing agent?</h4>
                            <div class="quiz-options">
                                <div class="quiz-option" data-question="3" data-option="A">A. It readily donates oxygen atoms to other substances</div>
                                <div class="quiz-option" data-question="3" data-option="B">It contains nitrogen which is highly reactive</div>
                                <div class="quiz-option" data-question="3" data-option="C">It can accept electrons from other substances</div>
                                <div class="quiz-option" data-question="3" data-option="D">It has a high melting point</div>
                            </div>
                            <div class="quiz-feedback" id="feedback-3"></div>
                        </div>
                        
                        <div class="quiz-question">
                            <h4>Question 4: Name two uses of ammonium nitrate.</h4>
                            <div class="quiz-options">
                                <div class="quiz-option" data-question="4" data-option="A">A. Fertilizer and explosives</div>
                                <div class="quiz-option" data-question="4" data-option="B">Food preservative and cleaning agent</div>
                                <div class="quiz-option" data-question="4" data-option="C">Glass manufacturing and water treatment</div>
                                <div class="quiz-option" data-question="4" data-option="D">Medicine production and battery manufacturing</div>
                            </div>
                            <div class="quiz-feedback" id="feedback-4"></div>
                        </div>
                        
                        <div class="quiz-question">
                            <h4>Question 5: Write the balanced chemical equation for the thermal decomposition of ammonium nitrate.</h4>
                            <div class="quiz-options">
                                <div class="quiz-option" data-question="5" data-option="A">A. NH₄NO₃(s) → N₂O(g) + 2H₂O(g)</div>
                                <div class="quiz-option" data-question="5" data-option="B">B. NH₄NO₃(s) → N₂(g) + H₂O(g)</div>
                                <div class="quiz-option" data-question="5" data-option="C">C. NH₄NO₃(s) → N₂O(g) + H₂O(g)</div>
                                <div class="quiz-option" data-question="5" data-option="D">D. NH₄NO₃(s) → N₂(g) + 2H₂O(g)</div>
                            </div>
                            <div class="quiz-feedback" id="feedback-5"></div>
                        </div>
                        
                        <div class="quiz-question">
                            <h4>Question 6: Calculate the number of moles in 1.2 kg of NH₄NO₃.</h4>
                            <div class="quiz-options">
                                <div class="quiz-option" data-question="6" data-option="A">A. 15 mol</div>
                                <div class="quiz-option" data-question="6" data-option="B">B. 1200 mol</div>
                                <div class="quiz-option" data-question="6" data-option="C">C. 15,000 mol</div>
                                <div class="quiz-option" data-question="6" data-option="D">D. 96 mol</div>
                            </div>
                            <div class="quiz-feedback" id="feedback-6"></div>
                        </div>
                        
                        <div class="quiz-question">
                            <h4>Question 7: Using your answer above, determine the total volume of gas produced at STP.</h4>
                            <div class="quiz-options">
                                <div class="quiz-option" data-question="7" data-option="A">A. 336 dm³</div>
                                <div class="quiz-option" data-question="7" data-option="B">B. 672 dm³</div>
                                <div class="quiz-option" data-question="7" data-option="C">C. 1008 dm³</div>
                                <div class="quiz-option" data-question="7" data-option="D">D. 224 dm³</div>
                            </div>
                            <div class="quiz-feedback" id="feedback-7"></div>
                        </div>
                        
                        <div class="quiz-question">
                            <h4>Question 8: If 10 g of NH₄NO₃ decomposes, calculate the mass of N₂O formed.</h4>
                            <div class="quiz-options">
                                <div class="quiz-option" data-question="8" data-option="A">A. 2.25 g</div>
                                <div class="quiz-option" data-question="8" data-option="B">B. 5.0 g</div>
                                <div class="quiz-option" data-question="8" data-option="C">C. 10.0 g</div>
                                <div class="quiz-option" data-question="8" data-option="D">D. 44.0 g</div>
                            </div>
                            <div class="quiz-feedback" id="feedback-8"></div>
                        </div>
                        
                        <div class="quiz-question">
                            <h4>Question 9: At a temperature and pressure where 1 mol gas = 25 dm³, calculate the volume of gas produced from 0.50 mol NH₄NO₃.</h4>
                            <div class="quiz-options">
                                <div class="quiz-option" data-question="9" data-option="A">A. 12.5 dm³</div>
                                <div class="quiz-option" data-question="9" data-option="B">B. 25.0 dm³</div>
                                <div class="quiz-option" data-question="9" data-option="C">C. 37.5 dm³</div>
                                <div class="quiz-option" data-question="9" data-option="D">D. 50.0 dm³</div>
                            </div>
                            <div class="quiz-feedback" id="feedback-9"></div>
                        </div>
                        
                        <div class="quiz-question">
                            <h4>Question 10: A mining engineer uses 3 kg NH₄NO₃. Calculate the volume of steam (H₂O gas) produced at STP.</h4>
                            <div class="quiz-options">
                                <div class="quiz-option" data-question="10" data-option="A">A. 840 dm³</div>
                                <div class="quiz-option" data-question="10" data-option="B">B. 1680 dm³</div>
                                <div class="quiz-option" data-question="10" data-option="C">C. 2100 dm³</div>
                                <div class="quiz-option" data-question="10" data-option="D">D. 2520 dm³</div>
                            </div>
                            <div class="quiz-feedback" id="feedback-10"></div>
                        </div>
                    </div>
                    
                    <div class="interactive-box">
                        <h4>Quiz Results</h4>
                        <p>Your score: <span id="quiz-score">0/10</span></p>
                        <button class="btn btn-secondary" id="reset-quiz">Reset Quiz</button>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>Resources</h4>
                    <ul>
                        <li><a href="#">Periodic Table</a></li>
                        <li><a href="#">Chemical Equations</a></li>
                        <li><a href="#">Stoichiometry Calculator</a></li>
                        <li><a href="#">Video Tutorials</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Related Topics</h4>
                    <ul>
                        <li><a href="#">Gas Laws</a></li>
                        <li><a href="#">Explosives Chemistry</a></li>
                        <li><a href="#">Thermal Decomposition</a></li>
                        <li><a href="#">Mining Applications</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Help</h4>
                    <ul>
                        <li><a href="#">Contact Teacher</a></li>
                        <li><a href="#">Study Tips</a></li>
                        <li><a href="#">FAQ</a></li>
                        <li><a href="#">Report Issue</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2023 Chemistry Education Portal. All rights reserved.</p>
            </div>
        </div>
    </footer>
    
    <div class="notification" id="notification"></div>
    
    <script>
        // DOM Elements
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');
        const notification = document.getElementById('notification');
        
        // Progress Tracking
        let completedSections = new Set();
        let quizScore = 0;
        let answeredQuestions = new Set();
        
        // Toggle Collapsible Sections
        function toggleCollapsible(button) {
            button.classList.toggle("active");
            const content = button.nextElementSibling;
            content.classList.toggle("show");
            
            // Get section identifier from button text
            const buttonText = button.textContent.trim();
            let sectionId = '';
            
            if (buttonText.includes("Introduction")) {
                sectionId = 'introduction';
            } else if (buttonText.includes("Learning Objectives")) {
                sectionId = 'objectives';
            } else if (buttonText.includes("Key Definitions")) {
                sectionId = 'definitions';
            } else if (buttonText.includes("Properties and Uses")) {
                sectionId = 'properties';
            } else if (buttonText.includes("Thermal Decomposition")) {
                sectionId = 'decomposition';
            } else if (buttonText.includes("Connection to Avogadro's")) {
                sectionId = 'avogadro';
            } else if (buttonText.includes("Stoichiometric Calculations")) {
                sectionId = 'calculations';
            } else if (buttonText.includes("Why Ammonium Nitrate")) {
                sectionId = 'explosives';
            } else if (buttonText.includes("Conclusion")) {
                sectionId = 'conclusion';
            } else if (buttonText.includes("End-of-Lesson Questions")) {
                sectionId = 'questions';
            }
            
            // Mark section as viewed if opened
            if (content.classList.contains("show") && sectionId) {
                if (!completedSections.has(sectionId)) {
                    completedSections.add(sectionId);
                    updateProgress();
                }
                
                // Mark as completed
                button.classList.add("completed");
            }
        }
        
        // Update Progress
        function updateProgress() {
            const totalSections = 9; // Total number of collapsible sections
            const completedCount = completedSections.size;
            const progressPercentage = Math.round((completedCount / totalSections) * 100);
            
            progressBar.style.width = `${progressPercentage}%`;
            progressText.textContent = `${progressPercentage}%`;
        }
        
        // Show Notification
        function showNotification(message, type = 'success') {
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // Explosion Visualization
        document.getElementById('trigger-explosion').addEventListener('click', () => {
            const container = document.getElementById('explosion-container');
            const particles = container.querySelectorAll('.explosion-particle');
            
            // Reset animation
            container.classList.remove('explosion-active');
            
            // Add explosion class to trigger animation
            setTimeout(() => {
                container.classList.add('explosion-active');
                
                // Set random directions for particles
                particles.forEach(particle => {
                    const tx = (Math.random() - 0.5) * 100;
                    const ty = (Math.random() - 0.5) * 100;
                    particle.style.setProperty('--tx', `${tx}px`);
                    particle.style.setProperty('--ty', `${ty}px`);
                });
            }, 100);
            
            showNotification('Explosion triggered! Rapid gas expansion causes rock fragmentation.', 'warning');
        });
        
        // Gas Volume Calculator
        document.getElementById('calculate-gas-volume').addEventListener('click', () => {
            const moles = parseFloat(document.getElementById('nh4no3-moles').value);
            
            if (isNaN(moles)) {
                showNotification('Please enter a valid number of moles', 'error');
                return;
            }
            
            // 1 mole NH4NO3 produces 3 moles of gas
            const totalMoles = moles * 3;
            const volume = totalMoles * 22.4; // dm³ at STP
            
            const resultBox = document.getElementById('gas-volume-result');
            const steps = document.getElementById('gas-volume-steps');
            const value = document.getElementById('gas-volume-value');
            
            steps.innerHTML = `
                <p>1. From the equation: NH₄NO₃(s) → N₂O(g) + 2H₂O(g)</p>
                <p>2. 1 mole of NH₄NO₃ produces 3 moles of gas</p>
                <p>3. ${moles} mol of NH₄NO₃ produces ${totalMoles} mol of gas</p>
                <p>4. At STP, 1 mol of gas occupies 22.4 dm³</p>
                <p>5. Total volume = ${totalMoles} × 22.4 = ${volume.toFixed(1)} dm³</p>
            `;
            
            value.textContent = `Total gas volume produced: ${volume.toFixed(1)} dm³`;
            
            resultBox.classList.add('show');
            showNotification('Gas volume calculated successfully!', 'success');
        });
        
        // Water Mass Calculator
        document.getElementById('calculate-water-mass').addEventListener('click', () => {
            const mass = parseFloat(document.getElementById('nh4no3-mass-water').value);
            
            if (isNaN(mass)) {
                showNotification('Please enter a valid mass', 'error');
                return;
            }
            
            // Molar mass of NH4NO3 = 80 g/mol
            const moles = mass / 80;
            // 1 mole NH4NO3 produces 2 moles H2O
            const waterMoles = moles * 2;
            // Molar mass of H2O = 18 g/mol
            const waterMass = waterMoles * 18;
            
            const resultBox = document.getElementById('water-mass-result');
            const steps = document.getElementById('water-mass-steps');
            const value = document.getElementById('water-mass-value');
            
            steps.innerHTML = `
                <p>1. Convert mass to moles: ${mass} g ÷ 80 g/mol = ${moles.toFixed(4)} mol NH₄NO₃</p>
                <p>2. From equation: 1 mol NH₄NO₃ → 2 mol H₂O</p>
                <p>3. ${moles.toFixed(4)} mol NH₄NO₃ produces ${waterMoles.toFixed(4)} mol H₂O</p>
                <p>4. Convert moles to mass: ${waterMoles.toFixed(4)} mol × 18 g/mol = ${waterMass.toFixed(2)} g H₂O</p>
            `;
            
            value.textContent = `Mass of water produced: ${waterMass.toFixed(2)} g`;
            
            resultBox.classList.add('show');
            showNotification('Water mass calculated successfully!', 'success');
        });
        
        // Quiz Functionality
        const quizAnswers = {
            1: 'A',
            2: 'A',
            3: 'A',
            4: 'A',
            5: 'A',
            6: 'A',
            7: 'C',
            8: 'A',
            9: 'C',
            10: 'B'
        };
        
        document.querySelectorAll('.quiz-option').forEach(option => {
            option.addEventListener('click', () => {
                const question = option.getAttribute('data-question');
                const selectedOption = option.getAttribute('data-option');
                
                // Skip if already answered
                if (answeredQuestions.has(question)) {
                    return;
                }
                
                // Mark as answered
                answeredQuestions.add(question);
                
                // Mark selected option
                option.classList.add('selected');
                
                // Check if correct
                const isCorrect = selectedOption === quizAnswers[question];
                
                // Show feedback
                const feedback = document.getElementById(`feedback-${question}`);
                feedback.classList.add('show');
                
                if (isCorrect) {
                    option.classList.add('correct');
                    feedback.classList.add('correct');
                    feedback.innerHTML = '<i class="fas fa-check-circle"></i> Correct! Well done.';
                    quizScore++;
                } else {
                    option.classList.add('incorrect');
                    feedback.classList.add('incorrect');
                    feedback.innerHTML = `<i class="fas fa-times-circle"></i> Incorrect. The correct answer is ${quizAnswers[question]}.`;
                    
                    // Highlight correct answer
                    document.querySelectorAll(`.quiz-option[data-question="${question}"][data-option="${quizAnswers[question]}"]`).forEach(correctOption => {
                        correctOption.classList.add('correct');
                    });
                }
                
                // Update score
                document.getElementById('quiz-score').textContent = `${quizScore}/10`;
                
                // Show notification
                if (isCorrect) {
                    showNotification('Correct answer!', 'success');
                } else {
                    showNotification('Incorrect answer. Review the material and try again.', 'error');
                }
            });
        });
        
        // Reset Quiz
        document.getElementById('reset-quiz').addEventListener('click', () => {
            quizScore = 0;
            answeredQuestions.clear();
            
            document.getElementById('quiz-score').textContent = '0/10';
            
            document.querySelectorAll('.quiz-option').forEach(option => {
                option.classList.remove('selected', 'correct', 'incorrect');
            });
            
            document.querySelectorAll('.quiz-feedback').forEach(feedback => {
                feedback.classList.remove('show', 'correct', 'incorrect');
            });
            
            showNotification('Quiz reset successfully', 'success');
        });
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            // No sections are initially marked as viewed
            updateProgress();
        });
    </script>
</body>
</html>
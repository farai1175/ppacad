<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantitative Aspects of Chemical Change - The Mole Concept</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --accent-color: #e74c3c;
            --light-color: #f8f9fa;
            --dark-color: #2c3e50;
            --warning-color: #f39c12;
            --success-color: #27ae60;
            --danger-color: #e74c3c;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f7fa;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 2rem 0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .header-title h1 {
            font-size: 2.2rem;
            margin-bottom: 0.5rem;
        }
        
        .header-title p {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .progress-container {
            background-color: rgba(255,255,255,0.2);
            border-radius: 10px;
            padding: 0.5rem 1rem;
            margin-top: 1rem;
            width: 100%;
        }
        
        .progress-bar {
            height: 10px;
            background-color: rgba(255,255,255,0.3);
            border-radius: 5px;
            overflow: hidden;
            margin-top: 0.5rem;
        }
        
        .progress {
            height: 100%;
            background-color: white;
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .progress-text {
            text-align: center;
            font-size: 0.9rem;
        }
        
        main {
            padding: 2rem 0;
        }
        
        .collapsible-container {
            margin-bottom: 1rem;
        }
        
        .collapsible {
            background-color: white;
            color: var(--dark-color);
            cursor: pointer;
            padding: 1rem 1.5rem;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 1.1rem;
            font-weight: 500;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .collapsible:hover {
            background-color: #f0f7ff;
        }
        
        .collapsible.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        .collapsible.completed {
            background-color: var(--secondary-color);
            color: white;
        }
        
        .collapsible-icon {
            transition: transform 0.3s ease;
        }
        
        .collapsible.active .collapsible-icon {
            transform: rotate(180deg);
        }
        
        .content {
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease;
            background-color: white;
            border-radius: 0 0 8px 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .content.show {
            padding: 2rem;
            max-height: 2000px;
        }
        
        .section-title {
            font-size: 1.8rem;
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--light-color);
        }
        
        .learning-objectives {
            background-color: #f0f7ff;
            border-left: 4px solid var(--primary-color);
            padding: 1.5rem;
            margin-bottom: 2rem;
            border-radius: 0 5px 5px 0;
        }
        
        .learning-objectives h3 {
            color: var(--primary-color);
            margin-bottom: 1rem;
        }
        
        .learning-objectives ul {
            padding-left: 1.5rem;
        }
        
        .learning-objectives li {
            margin-bottom: 0.5rem;
        }
        
        .definition-card {
            background-color: var(--light-color);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-left: 4px solid var(--accent-color);
        }
        
        .definition-card h4 {
            color: var(--accent-color);
            margin-bottom: 0.5rem;
        }
        
        .formula {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
            text-align: center;
            font-size: 1.2rem;
        }
        
        .interactive-box {
            background-color: #f0f7ff;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        
        .interactive-box h4 {
            color: var(--primary-color);
            margin-bottom: 1rem;
        }
        
        .calculator {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .input-group {
            flex: 1;
            min-width: 200px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        
        .input-group input, .input-group select {
            width: 100%;
            padding: 0.7rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        .btn {
            padding: 0.7rem 1.5rem;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .btn-secondary {
            background-color: var(--secondary-color);
        }
        
        .btn-secondary:hover {
            background-color: #27ae60;
        }
        
        .result-box {
            margin-top: 1.5rem;
            padding: 1rem;
            background-color: white;
            border-radius: 5px;
            border: 1px solid #e9ecef;
            display: none;
        }
        
        .result-box.show {
            display: block;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .avogadro-visualization {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 1rem;
            margin: 2rem 0;
        }
        
        .comparison-card {
            flex: 1;
            min-width: 200px;
            background-color: white;
            border-radius: 8px;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .comparison-card i {
            font-size: 3rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }
        
        .comparison-card h4 {
            margin-bottom: 0.5rem;
        }
        
        .comparison-card p {
            color: #666;
            font-size: 0.9rem;
        }
        
        .periodic-table {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            gap: 5px;
            margin: 1.5rem 0;
        }
        
        .element {
            background-color: var(--light-color);
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 0.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .element:hover {
            background-color: var(--primary-color);
            color: white;
            transform: scale(1.05);
        }
        
        .element.selected {
            background-color: var(--secondary-color);
            color: white;
        }
        
        .element-number {
            font-size: 0.7rem;
            font-weight: bold;
        }
        
        .element-symbol {
            font-size: 1.2rem;
            font-weight: bold;
        }
        
        .element-mass {
            font-size: 0.7rem;
        }
        
        .molar-mass-calculator {
            background-color: #f0f7ff;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        
        .compound-input {
            width: 100%;
            padding: 0.7rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            margin-bottom: 1rem;
        }
        
        .molar-mass-result {
            margin-top: 1rem;
            padding: 1rem;
            background-color: white;
            border-radius: 5px;
            border: 1px solid #e9ecef;
            display: none;
        }
        
        .molar-mass-result.show {
            display: block;
        }
        
        .quiz-container {
            background-color: #f0f7ff;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        
        .quiz-question {
            margin-bottom: 1.5rem;
        }
        
        .quiz-question h4 {
            margin-bottom: 1rem;
            color: var(--primary-color);
        }
        
        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .quiz-option {
            padding: 0.7rem;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .quiz-option:hover {
            background-color: #e9ecef;
        }
        
        .quiz-option.selected {
            background-color: var(--primary-color);
            color: white;
        }
        
        .quiz-option.correct {
            background-color: var(--success-color);
            color: white;
        }
        
        .quiz-option.incorrect {
            background-color: var(--danger-color);
            color: white;
        }
        
        .quiz-feedback {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 5px;
            display: none;
        }
        
        .quiz-feedback.show {
            display: block;
        }
        
        .quiz-feedback.correct {
            background-color: rgba(39, 174, 96, 0.1);
            border: 1px solid var(--success-color);
            color: var(--success-color);
        }
        
        .quiz-feedback.incorrect {
            background-color: rgba(231, 76, 60, 0.1);
            border: 1px solid var(--danger-color);
            color: var(--danger-color);
        }
        
        .footer {
            background-color: var(--dark-color);
            color: white;
            padding: 2rem 0;
            margin-top: 3rem;
        }
        
        .footer-content {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
        }
        
        .footer-section {
            flex: 1;
            min-width: 200px;
            margin-bottom: 1rem;
        }
        
        .footer-section h4 {
            margin-bottom: 1rem;
            color: var(--secondary-color);
        }
        
        .footer-section ul {
            list-style: none;
        }
        
        .footer-section ul li {
            margin-bottom: 0.5rem;
        }
        
        .footer-section a {
            color: #ccc;
            text-decoration: none;
            transition: color 0.3s ease;
        }
        
        .footer-section a:hover {
            color: white;
        }
        
        .copyright {
            text-align: center;
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(255,255,255,0.1);
            color: #ccc;
            font-size: 0.9rem;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal.show {
            display: flex;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 10px;
            padding: 2rem;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            animation: modalSlideIn 0.3s ease;
        }
        
        @keyframes modalSlideIn {
            from { opacity: 0; transform: translateY(-50px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .modal-title {
            font-size: 1.5rem;
            color: var(--primary-color);
        }
        
        .modal-close {
            font-size: 1.5rem;
            cursor: pointer;
            color: #999;
            transition: color 0.3s ease;
        }
        
        .modal-close:hover {
            color: var(--danger-color);
        }
        
        .table-container {
            overflow-x: auto;
            margin: 1.5rem 0;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1rem;
        }
        
        th, td {
            padding: 0.8rem;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background-color: var(--light-color);
            font-weight: 500;
            color: var(--dark-color);
        }
        
        tr:hover {
            background-color: #f8f9fa;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 1rem 1.5rem;
            border-radius: 5px;
            color: white;
            font-weight: 500;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            z-index: 1001;
            display: none;
            animation: notificationSlideIn 0.3s ease;
        }
        
        @keyframes notificationSlideIn {
            from { opacity: 0; transform: translateX(50px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .notification.show {
            display: block;
        }
        
        .notification.success {
            background-color: var(--success-color);
        }
        
        .notification.error {
            background-color: var(--danger-color);
        }
        
        .notification.warning {
            background-color: var(--warning-color);
        }
        
        .lo-badge {
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            margin-left: 0.5rem;
        }
        
        @media (max-width: 768px) {
            .header-title h1 {
                font-size: 1.8rem;
            }
            
            .content {
                padding: 1rem;
            }
            
            .calculator {
                flex-direction: column;
            }
            
            .avogadro-visualization {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="header-title">
                    <h1>Quantitative Aspects of Chemical Change</h1>
                    <p>Physical Sciences / Chemistry - The Mole Concept</p>
                </div>
            </div>
            <div class="progress-container">
                <div class="progress-text">Lesson Progress: <span id="progress-text">0%</span></div>
                <div class="progress-bar">
                    <div class="progress" id="progress-bar"></div>
                </div>
            </div>
        </div>
    </header>
    
    <main>
        <div class="container">
            <!-- Introduction Section -->
            <div class="collapsible-container">
                <button class="collapsible active" onclick="toggleCollapsible(this)">
                    <span>Introduction</span>
                    <i class="fas fa-chevron-down collapsible-icon"></i>
                </button>
                <div class="content show">
                    <h2 class="section-title">Introduction</h2>
                    <p>Stoichiometry, the "math behind chemistry," deals with the quantities in chemical reactions and provides the quantitative relationship between reactants and products. In this lesson, we establish the definition of the mole, its relationship with Avogadro's number, and the key formulas necessary for basic stoichiometric calculations.</p>
                    
                    <div class="interactive-box">
                        <h4>Why Do We Need the Mole?</h4>
                        <p>Atoms and molecules are incredibly small - so small that we can't count them individually. Imagine trying to count grains of sand on a beach! The mole is a convenient counting unit, just like a "dozen" means 12 items, a "mole" means 6.02 × 10²³ items.</p>
                        
                        <div class="avogadro-visualization">
                            <div class="comparison-card">
                                <i class="fas fa-egg"></i>
                                <h4>Dozen</h4>
                                <p>12 items</p>
                            </div>
                            <div class="comparison-card">
                                <i class="fas fa-bread-slice"></i>
                                <h4>Baker's Dozen</h4>
                                <p>13 items</p>
                            </div>
                            <div class="comparison-card">
                                <i class="fas fa-atom"></i>
                                <h4>Mole</h4>
                                <p>6.02 × 10²³ items</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Learning Objectives Section -->
            <div class="collapsible-container">
                <button class="collapsible" onclick="toggleCollapsible(this)">
                    <span>Learning Objectives</span>
                    <i class="fas fa-chevron-down collapsible-icon"></i>
                </button>
                <div class="content">
                    <h2 class="section-title">Learning Objectives</h2>
                    <div class="learning-objectives">
                        <h3>By the end of this lesson, you should be able to:</h3>
                        <ul>
                            <li>Describe the mole as the SI unit for amount of substance <span class="lo-badge">LO 1</span></li>
                            <li>Describe the relationship between the mole and Avogadro's number <span class="lo-badge">LO 5</span></li>
                            <li>Calculate the molar mass of compounds <span class="lo-badge">LO 2</span></li>
                            <li>Use the formulae: n = m/M; n = V/V<sub>m</sub>; n = N/N<sub>A</sub> <span class="lo-badge">LO 4</span></li>
                            <li>Determine the percentage composition of compounds <span class="lo-badge">LO 3</span></li>
                            <li>Conceptualize the magnitude of Avogadro's number <span class="lo-badge">LO 6</span></li>
                        </ul>
                    </div>
                    
                    <div class="interactive-box">
                        <h4>Track Your Progress</h4>
                        <p>As you complete each section of this lesson, you'll see your progress bar at the top of the page increase. This helps you keep track of what you've learned and what's still to come.</p>
                        <button class="btn" id="mark-objectives-complete">Mark This Section Complete</button>
                    </div>
                </div>
            </div>
            
            <!-- The Mole as SI Unit Section -->
            <div class="collapsible-container">
                <button class="collapsible" onclick="toggleCollapsible(this)">
                    <span>The Mole as SI Unit <span class="lo-badge">LO 1</span></span>
                    <i class="fas fa-chevron-down collapsible-icon"></i>
                </button>
                <div class="content">
                    <h2 class="section-title">The Mole as the SI Unit (LO 1)</h2>
                    
                    <div class="definition-card">
                        <h4>Mole (mol)</h4>
                        <p>The SI unit for <strong>amount of substance</strong>. One mole contains exactly 6.02 × 10²³ particles (atoms, molecules, ions, etc.).</p>
                    </div>
                    
                    <p>The mole is defined as the amount of substance containing the <strong>same number of particles</strong> as there are atoms in exactly 12 g of carbon-12.</p>
                    
                    <p>This specific number of particles is called <strong>Avogadro's constant</strong> (N<sub>A</sub>).</p>
                    
                    <div class="formula">N<sub>A</sub> = 6.02 × 10²³ particles·mol⁻¹</div>
                    
                    <p>The relationship is defined by the formula:</p>
                    
                    <div class="formula">n = N/N<sub>A</sub></div>
                    
                    <p>where:</p>
                    <ul>
                        <li>n = number of moles</li>
                        <li>N = number of particles (atoms, ions, or molecules)</li>
                        <li>N<sub>A</sub> = Avogadro's constant (6.02 × 10²³)</li>
                    </ul>
                    
                    <div class="interactive-box">
                        <h4>Try It Yourself: Calculate Number of Particles</h4>
                        <div class="calculator">
                            <div class="input-group">
                                <label for="moles-particles">Number of Moles (mol)</label>
                                <input type="number" id="moles-particles" placeholder="Enter moles" step="any">
                            </div>
                            <div class="input-group">
                                <label>&nbsp;</label>
                                <button class="btn" id="calculate-particles">Calculate Particles</button>
                            </div>
                        </div>
                        <div class="result-box" id="particles-result">
                            <h4>Result:</h4>
                            <p id="particles-calculation"></p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Avogadro's Number Section -->
            <div class="collapsible-container">
                <button class="collapsible" onclick="toggleCollapsible(this)">
                    <span>Conceptualizing Avogadro's Number <span class="lo-badge">LO 6</span></span>
                    <i class="fas fa-chevron-down collapsible-icon"></i>
                </button>
                <div class="content">
                    <h2 class="section-title">Conceptualizing Avogadro's Number (LO 6)</h2>
                    
                    <p>Avogadro's constant, 6.02 × 10²³, is a very large number used to count microscopic particles. Conceptualizing its magnitude helps illustrate why the mole unit is necessary.</p>
                    
                    <div class="interactive-box">
                        <h4>How Big is Avogadro's Number?</h4>
                        <p>To help you understand the scale of this number, consider these comparisons:</p>
                        
                        <div class="avogadro-visualization">
                            <div class="comparison-card">
                                <i class="fas fa-water"></i>
                                <h4>Drops of Water</h4>
                                <p>If you had Avogadro's number of water drops, you could fill all the oceans on Earth 100,000 times!</p>
                            </div>
                            <div class="comparison-card">
                                <i class="fas fa-coins"></i>
                                <h4>Pennies</h4>
                                <p>If you had Avogadro's number of pennies and distributed them equally to every person on Earth, each person would get over 80 trillion dollars!</p>
                            </div>
                            <div class="comparison-card">
                                <i class="fas fa-seedling"></i>
                                <h4>Grains of Sand</h4>
                                <p>If you had Avogadro's number of grains of sand, you could cover the entire surface of the Earth with a layer 50 meters deep!</p>
                            </div>
                        </div>
                    </div>
                    
                    <p>Just as the word 'dozen' represents 12 objects, a mole represents 6.02 × 10²³ objects. For instance, a mole of water gives you 6.02 × 10²³ water molecules.</p>
                    
                    <div class="interactive-box">
                        <h4>Visualize Avogadro's Number</h4>
                        <p>Use the slider below to see how different quantities compare to a mole:</p>
                        <input type="range" id="avogadro-slider" min="0" max="100" value="0" style="width: 100%; margin: 1rem 0;">
                        <div id="avogadro-comparison" style="text-align: center; font-size: 1.2rem; margin-top: 1rem;">
                            <p>0 items = 0% of a mole</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Molar Mass Section -->
            <div class="collapsible-container">
                <button class="collapsible" onclick="toggleCollapsible(this)">
                    <span>Calculating Molar Mass <span class="lo-badge">LO 2</span></span>
                    <i class="fas fa-chevron-down collapsible-icon"></i>
                </button>
                <div class="content">
                    <h2 class="section-title">Calculating Molar Mass (M) (LO 2)</h2>
                    
                    <div class="definition-card">
                        <h4>Molar Mass (M)</h4>
                        <p>The mass of one mole of a substance, measured in g·mol⁻¹.</p>
                    </div>
                    
                    <p>To calculate the molar mass of a compound given its formula:</p>
                    <ol>
                        <li>Find the <strong>relative atomic mass</strong> (A<sub>r</sub>) for each element from the periodic table.</li>
                        <li>The molar mass (M) is the sum of the relative atomic masses of all the atoms in the molecule or formula unit, expressed in g·mol⁻¹.</li>
                    </ol>
                    
                    <div class="example-box">
                        <h4>Example:</h4>
                        <p>The molar mass of copper(II) sulfate pentahydrate (CuSO<sub>4</sub>·5H<sub>2</sub>O) is calculated by summing the atomic masses:</p>
                        <div class="formula">M(CuSO<sub>4</sub>·5H<sub>2</sub>O) = 249.72 g·mol⁻¹</div>
                    </div>
                    
                    <div class="molar-mass-calculator">
                        <h4>Interactive Molar Mass Calculator</h4>
                        <p>Enter a chemical formula to calculate its molar mass:</p>
                        <input type="text" class="compound-input" id="compound-input" placeholder="e.g., H2SO4">
                        <button class="btn" id="calculate-molar-mass">Calculate Molar Mass</button>
                        
                        <div class="molar-mass-result" id="molar-mass-result">
                            <h4>Calculation Steps:</h4>
                            <div id="calculation-steps"></div>
                            <h4>Molar Mass:</h4>
                            <p id="molar-mass-value"></p>
                        </div>
                    </div>
                    
                    <div class="interactive-box">
                        <h4>Periodic Table Reference</h4>
                        <p>Click on elements to see their atomic masses:</p>
                        <div class="periodic-table" id="periodic-table">
                            <!-- Periodic table elements will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Mole Conversions Section -->
            <div class="collapsible-container">
                <button class="collapsible" onclick="toggleCollapsible(this)">
                    <span>The Mole Conversion Formulae <span class="lo-badge">LO 4</span></span>
                    <i class="fas fa-chevron-down collapsible-icon"></i>
                </button>
                <div class="content">
                    <h2 class="section-title">The Mole Conversion Formulae (LO 4)</h2>
                    
                    <p>The mole acts as the central link (the "mole bridge") between measurable properties (mass, volume, concentration) and the number of particles.</p>
                    
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Calculation</th>
                                    <th>Formula</th>
                                    <th>Units</th>
                                    <th>Context/Notes</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Mass to Moles</td>
                                    <td>n = m/M</td>
                                    <td>m in g, M in g·mol⁻¹, n in mol</td>
                                    <td>Relates mass of a sample to moles using molar mass.</td>
                                </tr>
                                <tr>
                                    <td>Particles to Moles</td>
                                    <td>n = N/N<sub>A</sub></td>
                                    <td>N is the number of particles, N<sub>A</sub> = 6.02 × 10²³</td>
                                    <td>Used to count atoms, molecules, or ions.</td>
                                </tr>
                                <tr>
                                    <td>Volume to Moles</td>
                                    <td>n = V/V<sub>m</sub></td>
                                    <td>V in dm³, V<sub>m</sub> = 22.4 dm³·mol⁻¹</td>
                                    <td>Applies only to gases at STP (Standard Temperature and Pressure: 273 K and 101.3 kPa).</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="interactive-box">
                        <h4>Mole Conversion Calculator</h4>
                        <div class="calculator">
                            <div class="input-group">
                                <label for="conversion-type">Conversion Type</label>
                                <select id="conversion-type">
                                    <option value="mass-moles">Mass ↔ Moles</option>
                                    <option value="particles-moles">Particles ↔ Moles</option>
                                    <option value="volume-moles">Volume ↔ Moles</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label for="conversion-direction">Direction</label>
                                <select id="conversion-direction">
                                    <option value="to-moles">To Moles</option>
                                    <option value="from-moles">From Moles</option>
                                </select>
                            </div>
                        </div>
                        
                        <div id="mass-moles-converter" class="converter">
                            <div class="calculator">
                                <div class="input-group">
                                    <label for="mass-input">Mass (g)</label>
                                    <input type="number" id="mass-input" placeholder="Enter mass" step="any">
                                </div>
                                <div class="input-group">
                                    <label for="molar-mass-input">Molar Mass (g·mol⁻¹)</label>
                                    <input type="number" id="molar-mass-input" placeholder="Enter molar mass" step="any">
                                </div>
                                <div class="input-group">
                                    <label>&nbsp;</label>
                                    <button class="btn" id="convert-mass-moles">Convert</button>
                                </div>
                            </div>
                        </div>
                        
                        <div id="particles-moles-converter" class="converter" style="display: none;">
                            <div class="calculator">
                                <div class="input-group">
                                    <label for="particles-input">Number of Particles</label>
                                    <input type="number" id="particles-input" placeholder="Enter number of particles" step="any">
                                </div>
                                <div class="input-group">
                                    <label>&nbsp;</label>
                                    <button class="btn" id="convert-particles-moles">Convert</button>
                                </div>
                            </div>
                        </div>
                        
                        <div id="volume-moles-converter" class="converter" style="display: none;">
                            <div class="calculator">
                                <div class="input-group">
                                    <label for="volume-input">Volume (dm³)</label>
                                    <input type="number" id="volume-input" placeholder="Enter volume" step="any">
                                </div>
                                <div class="input-group">
                                    <label>&nbsp;</label>
                                    <button class="btn" id="convert-volume-moles">Convert</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="result-box" id="conversion-result">
                            <h4>Result:</h4>
                            <p id="conversion-calculation"></p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Percentage Composition Section -->
            <div class="collapsible-container">
                <button class="collapsible" onclick="toggleCollapsible(this)">
                    <span>Determining Percentage Composition <span class="lo-badge">LO 3</span></span>
                    <i class="fas fa-chevron-down collapsible-icon"></i>
                </button>
                <div class="content">
                    <h2 class="section-title">Determining Percentage Composition (LO 3)</h2>
                    
                    <div class="definition-card">
                        <h4>Percentage Composition</h4>
                        <p>The percentage of each of the components in a substance.</p>
                    </div>
                    
                    <p>Percentage composition determines what percentage of a substance's total mass is contributed by each element, given the chemical formula.</p>
                    
                    <p>The steps are:</p>
                    <ol>
                        <li><strong>Calculate the molar mass</strong> of the compound.</li>
                        <li><strong>Calculate the molar mass of each element</strong> in the compound.</li>
                        <li>Calculate the percentage of each element using the formula:</li>
                    </ol>
                    
                    <div class="formula">Percentage element (%) = (molar mass of element / molar mass of compound) × 100</div>
                    
                    <p>This method is also applied to determine the <strong>percentage water of crystallization</strong> in hydrated salts.</p>
                    
                    <div class="interactive-box">
                        <h4>Percentage Composition Calculator</h4>
                        <p>Enter a chemical formula to calculate its percentage composition:</p>
                        <input type="text" class="compound-input" id="percentage-compound-input" placeholder="e.g., H2O">
                        <button class="btn" id="calculate-percentage">Calculate Percentage Composition</button>
                        
                        <div class="result-box" id="percentage-result">
                            <h4>Percentage Composition:</h4>
                            <div id="percentage-breakdown"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Conclusion Section -->
            <div class="collapsible-container">
                <button class="collapsible" onclick="toggleCollapsible(this)">
                    <span>Conclusion</span>
                    <i class="fas fa-chevron-down collapsible-icon"></i>
                </button>
                <div class="content">
                    <h2 class="section-title">Conclusion</h2>
                    
                    <p>The <strong>mole</strong> is the cornerstone of quantitative chemistry, serving as the necessary unit to relate measurable quantities (mass, volume) to the microscopic world of atoms and molecules. The concept is numerically defined by <strong>Avogadro's number</strong> (6.02 × 10²³), which is the number of particles present in <strong>one mole</strong> (LO 5, LO 6).</p>
                    
                    <p>Molar mass (LO 2) allows us to convert between mass and moles, while molar volume allows gas volumes at STP to be converted to moles (LO 4). Understanding these relationships and formulas enables fundamental calculations like determining the percentage composition of compounds (LO 3).</p>
                    
                    <div class="interactive-box">
                        <h4>The Mole Analogy</h4>
                        <p>The mole is like a baker's dozen, but for atoms: you can't count atoms individually, so instead, you measure the mass of a substance (like weighing flour) and use the conversion factor (molar mass) to figure out that you have a mole, or 6.02 × 10²³ particles (the right number of molecules for the chemical "recipe").</p>
                        
                        <div class="avogadro-visualization">
                            <div class="comparison-card">
                                <i class="fas fa-baking"></i>
                                <h4>Baker's Dozen</h4>
                                <p>13 items for baking</p>
                            </div>
                            <div class="comparison-card">
                                <i class="fas fa-flask"></i>
                                <h4>Chemist's Mole</h4>
                                <p>6.02 × 10²³ particles for reactions</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Questions Section -->
            <div class="collapsible-container">
                <button class="collapsible" onclick="toggleCollapsible(this)">
                    <span>End-of-Lesson Questions</span>
                    <i class="fas fa-chevron-down collapsible-icon"></i>
                </button>
                <div class="content">
                    <h2 class="section-title">End-of-Lesson Questions</h2>
                    
                    <div class="quiz-container">
                        <div class="quiz-question">
                            <h4>Question 1: Describe the mole, focusing on its definition relative to carbon-12 (LO 1).</h4>
                            <div class="quiz-options">
                                <div class="quiz-option" data-question="1" data-option="A">A. The amount of substance containing the same number of particles as there are atoms in exactly 12 g of carbon-12.</div>
                                <div class="quiz-option" data-question="1" data-option="B">B. The amount of substance containing 12 particles.</div>
                                <div class="quiz-option" data-question="1" data-option="C">C. The amount of substance containing 6.02 × 10²³ grams of carbon-12.</div>
                                <div class="quiz-option" data-question="1" data-option="D">D. The amount of substance containing the same mass as 12 g of carbon-12.</div>
                            </div>
                            <div class="quiz-feedback" id="feedback-1"></div>
                        </div>
                        
                        <div class="quiz-question">
                            <h4>Question 2: Describe the relationship between the mole and Avogadro's number (LO 5).</h4>
                            <div class="quiz-options">
                                <div class="quiz-option" data-question="2" data-option="A">A. One mole contains 6.02 × 10²³ particles, which is Avogadro's number.</div>
                                <div class="quiz-option" data-question="2" data-option="B">B. One mole contains 6.02 × 10²³ grams, which is Avogadro's number.</div>
                                <div class="quiz-option" data-question="2" data-option="C">C. Avogadro's number is the number of moles in one gram of a substance.</div>
                                <div class="quiz-option" data-question="2" data-option="D">D. Avogadro's number is the number of elements in the periodic table.</div>
                            </div>
                            <div class="quiz-feedback" id="feedback-2"></div>
                        </div>
                        
                        <div class="quiz-question">
                            <h4>Question 3: Calculate the molar mass of sulfuric acid (H₂SO₄) (LO 2).</h4>
                            <div class="quiz-options">
                                <div class="quiz-option" data-question="3" data-option="A">A. 98.08 g·mol⁻¹</div>
                                <div class="quiz-option" data-question="3" data-option="B">B. 96.06 g·mol⁻¹</div>
                                <div class="quiz-option" data-question="3" data-option="C">C. 82.07 g·mol⁻¹</div>
                                <div class="quiz-option" data-question="3" data-option="D">D. 114.12 g·mol⁻¹</div>
                            </div>
                            <div class="quiz-feedback" id="feedback-3"></div>
                        </div>
                        
                        <div class="quiz-question">
                            <h4>Question 4: Calculate the mass of 0.2 mol of bromine (Br₂) (LO 4).</h4>
                            <div class="quiz-options">
                                <div class="quiz-option" data-question="4" data-option="A">A. 31.996 g</div>
                                <div class="quiz-option" data-question="4" data-option="B">B. 15.998 g</div>
                                <div class="quiz-option" data-question="4" data-option="C">C. 79.99 g</div>
                                <div class="quiz-option" data-question="4" data-option="D">D. 63.992 g</div>
                            </div>
                            <div class="quiz-feedback" id="feedback-4"></div>
                        </div>
                        
                        <div class="quiz-question">
                            <h4>Question 5: Calculate the number of molecules present in 50 g of methane (CH₄) (LO 4).</h4>
                            <div class="quiz-options">
                                <div class="quiz-option" data-question="5" data-option="A">A. 1.88 × 10²⁴ molecules</div>
                                <div class="quiz-option" data-question="5" data-option="B">B. 3.01 × 10²³ molecules</div>
                                <div class="quiz-option" data-question="5" data-option="C">C. 9.40 × 10²³ molecules</div>
                                <div class="quiz-option" data-question="5" data-option="D">D. 1.88 × 10²³ molecules</div>
                            </div>
                            <div class="quiz-feedback" id="feedback-5"></div>
                        </div>
                        
                        <div class="quiz-question">
                            <h4>Question 6: If 1.2 mol of gas occupies a volume of 26.88 dm³ at STP, what is the molar volume of the gas? (LO 4)</h4>
                            <div class="quiz-options">
                                <div class="quiz-option" data-question="6" data-option="A">A. 22.4 dm³·mol⁻¹</div>
                                <div class="quiz-option" data-question="6" data-option="B">B. 26.88 dm³·mol⁻¹</div>
                                <div class="quiz-option" data-question="6" data-option="C">C. 32.26 dm³·mol⁻¹</div>
                                <div class="quiz-option" data-question="6" data-option="D">D. 1.2 dm³·mol⁻¹</div>
                            </div>
                            <div class="quiz-feedback" id="feedback-6"></div>
                        </div>
                        
                        <div class="quiz-question">
                            <h4>Question 7: Determine the percentage composition of hydrogen in water (H₂O) (LO 3).</h4>
                            <div class="quiz-options">
                                <div class="quiz-option" data-question="7" data-option="A">A. 11.19%</div>
                                <div class="quiz-option" data-question="7" data-option="B">B. 88.81%</div>
                                <div class="quiz-option" data-question="7" data-option="C">C. 33.33%</div>
                                <div class="quiz-option" data-question="7" data-option="D">D. 66.67%</div>
                            </div>
                            <div class="quiz-feedback" id="feedback-7"></div>
                        </div>
                        
                        <div class="quiz-question">
                            <h4>Question 8: Conceptualize the magnitude of Avogadro's number by comparing it to a common everyday counting unit like a dozen (LO 6).</h4>
                            <div class="quiz-options">
                                <div class="quiz-option" data-question="8" data-option="A">A. A mole is to a dozen as 6.02 × 10²³ is to 12.</div>
                                <div class="quiz-option" data-question="8" data-option="B">B. A mole is 12 times larger than a dozen.</div>
                                <div class="quiz-option" data-question="8" data-option="C">C. A mole is 6.02 × 10²³ times larger than a dozen.</div>
                                <div class="quiz-option" data-question="8" data-option="D">D. A mole and a dozen are the same size.</div>
                            </div>
                            <div class="quiz-feedback" id="feedback-8"></div>
                        </div>
                    </div>
                    
                    <div class="interactive-box">
                        <h4>Quiz Results</h4>
                        <p>Your score: <span id="quiz-score">0/8</span></p>
                        <button class="btn btn-secondary" id="reset-quiz">Reset Quiz</button>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>Resources</h4>
                    <ul>
                        <li><a href="#">Periodic Table</a></li>
                        <li><a href="#">Mole Calculator</a></li>
                        <li><a href="#">Practice Problems</a></li>
                        <li><a href="#">Video Tutorials</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Related Topics</h4>
                    <ul>
                        <li><a href="#">Chemical Reactions</a></li>
                        <li><a href="#">Stoichiometry</a></li>
                        <li><a href="#">Gas Laws</a></li>
                        <li><a href="#">Solutions</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Help</h4>
                    <ul>
                        <li><a href="#">Contact Teacher</a></li>
                        <li><a href="#">Study Tips</a></li>
                        <li><a href="#">FAQ</a></li>
                        <li><a href="#">Report Issue</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2023 Chemistry Education Portal. All rights reserved.</p>
            </div>
        </div>
    </footer>
    
    <div class="modal" id="formula-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Formula Reference</h3>
                <span class="modal-close" id="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="formula">n = m/M</div>
                <p>Where n = moles, m = mass (g), M = molar mass (g·mol⁻¹)</p>
                
                <div class="formula">n = V/V<sub>m</sub></div>
                <p>Where n = moles, V = volume (dm³), V<sub>m</sub> = molar volume (22.4 dm³·mol⁻¹ at STP)</p>
                
                <div class="formula">n = N/N<sub>A</sub></div>
                <p>Where n = moles, N = number of particles, N<sub>A</sub> = Avogadro's number (6.02 × 10²³)</p>
                
                <div class="formula">Percentage element (%) = (molar mass of element / molar mass of compound) × 100</div>
            </div>
        </div>
    </div>
    
    <div class="notification" id="notification"></div>
    
    <script>
        // Periodic Table Data
        const periodicTableData = [
            { symbol: "H", name: "Hydrogen", atomicNumber: 1, atomicMass: 1.008 },
            { symbol: "He", name: "Helium", atomicNumber: 2, atomicMass: 4.003 },
            { symbol: "Li", name: "Lithium", atomicNumber: 3, atomicMass: 6.941 },
            { symbol: "Be", name: "Beryllium", atomicNumber: 4, atomicMass: 9.012 },
            { symbol: "B", name: "Boron", atomicNumber: 5, atomicMass: 10.81 },
            { symbol: "C", name: "Carbon", atomicNumber: 6, atomicMass: 12.01 },
            { symbol: "N", name: "Nitrogen", atomicNumber: 7, atomicMass: 14.01 },
            { symbol: "O", name: "Oxygen", atomicNumber: 8, atomicMass: 16.00 },
            { symbol: "F", name: "Fluorine", atomicNumber: 9, atomicMass: 19.00 },
            { symbol: "Ne", name: "Neon", atomicNumber: 10, atomicMass: 20.18 },
            { symbol: "Na", name: "Sodium", atomicNumber: 11, atomicMass: 22.99 },
            { symbol: "Mg", name: "Magnesium", atomicNumber: 12, atomicMass: 24.31 },
            { symbol: "Al", name: "Aluminum", atomicNumber: 13, atomicMass: 26.98 },
            { symbol: "Si", name: "Silicon", atomicNumber: 14, atomicMass: 28.09 },
            { symbol: "P", name: "Phosphorus", atomicNumber: 15, atomicMass: 30.97 },
            { symbol: "S", name: "Sulfur", atomicNumber: 16, atomicMass: 32.07 },
            { symbol: "Cl", name: "Chlorine", atomicNumber: 17, atomicMass: 35.45 },
            { symbol: "Ar", name: "Argon", atomicNumber: 18, atomicMass: 39.95 },
            { symbol: "K", name: "Potassium", atomicNumber: 19, atomicMass: 39.10 },
            { symbol: "Ca", name: "Calcium", atomicNumber: 20, atomicMass: 40.08 },
            { symbol: "Fe", name: "Iron", atomicNumber: 26, atomicMass: 55.85 },
            { symbol: "Cu", name: "Copper", atomicNumber: 29, atomicMass: 63.55 },
            { symbol: "Zn", name: "Zinc", atomicNumber: 30, atomicMass: 65.38 },
            { symbol: "Br", name: "Bromine", atomicNumber: 35, atomicMass: 79.90 },
            { symbol: "Ag", name: "Silver", atomicNumber: 47, atomicMass: 107.87 },
            { symbol: "I", name: "Iodine", atomicNumber: 53, atomicMass: 126.90 },
            { symbol: "Ba", name: "Barium", atomicNumber: 56, atomicMass: 137.33 },
            { symbol: "Pb", name: "Lead", atomicNumber: 82, atomicMass: 207.2 }
        ];
        
        // DOM Elements
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');
        const notification = document.getElementById('notification');
        
        // Progress Tracking
        let completedSections = new Set();
        let quizScore = 0;
        let answeredQuestions = new Set();
        
        // Toggle Collapsible Sections
        function toggleCollapsible(button) {
            button.classList.toggle("active");
            const content = button.nextElementSibling;
            content.classList.toggle("show");
            
            // Get section identifier from button text
            const buttonText = button.textContent.trim();
            let sectionId = '';
            
            if (buttonText.includes("Introduction")) {
                sectionId = 'introduction';
            } else if (buttonText.includes("Learning Objectives")) {
                sectionId = 'objectives';
            } else if (buttonText.includes("The Mole as SI Unit")) {
                sectionId = 'mole';
            } else if (buttonText.includes("Conceptualizing Avogadro's Number")) {
                sectionId = 'avogadro';
            } else if (buttonText.includes("Calculating Molar Mass")) {
                sectionId = 'molar-mass';
            } else if (buttonText.includes("The Mole Conversion Formulae")) {
                sectionId = 'conversions';
            } else if (buttonText.includes("Determining Percentage Composition")) {
                sectionId = 'percentage';
            } else if (buttonText.includes("Conclusion")) {
                sectionId = 'conclusion';
            } else if (buttonText.includes("End-of-Lesson Questions")) {
                sectionId = 'questions';
            }
            
            // Mark section as viewed if opened
            if (content.classList.contains("show") && sectionId) {
                if (!completedSections.has(sectionId)) {
                    completedSections.add(sectionId);
                    updateProgress();
                }
                
                // Mark as completed
                button.classList.add("completed");
            }
        }
        
        // Update Progress
        function updateProgress() {
            const totalSections = 9; // Total number of collapsible sections
            const completedCount = completedSections.size;
            const progressPercentage = Math.round((completedCount / totalSections) * 100);
            
            progressBar.style.width = `${progressPercentage}%`;
            progressText.textContent = `${progressPercentage}%`;
        }
        
        // Show Notification
        function showNotification(message, type = 'success') {
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // Initialize Periodic Table
        function initPeriodicTable() {
            const periodicTable = document.getElementById('periodic-table');
            
            periodicTableData.forEach(element => {
                const elementDiv = document.createElement('div');
                elementDiv.className = 'element';
                elementDiv.innerHTML = `
                    <div class="element-number">${element.atomicNumber}</div>
                    <div class="element-symbol">${element.symbol}</div>
                    <div class="element-mass">${element.atomicMass.toFixed(2)}</div>
                `;
                
                elementDiv.addEventListener('click', () => {
                    showNotification(`${element.name} (${element.symbol}): Atomic Mass = ${element.atomicMass} g·mol⁻¹`, 'success');
                });
                
                periodicTable.appendChild(elementDiv);
            });
        }
        
        // Calculate Particles from Moles
        document.getElementById('calculate-particles').addEventListener('click', () => {
            const moles = parseFloat(document.getElementById('moles-particles').value);
            
            if (isNaN(moles)) {
                showNotification('Please enter a valid number of moles', 'error');
                return;
            }
            
            const avogadroNumber = 6.02e23;
            const particles = moles * avogadroNumber;
            
            const resultBox = document.getElementById('particles-result');
            const calculation = document.getElementById('particles-calculation');
            
            calculation.textContent = `${moles} mol × ${avogadroNumber.toExponential(2)} particles/mol = ${particles.toExponential(2)} particles`;
            resultBox.classList.add('show');
            
            showNotification('Calculation complete!', 'success');
        });
        
        // Avogadro Number Visualization
        document.getElementById('avogadro-slider').addEventListener('input', (e) => {
            const value = parseInt(e.target.value);
            const comparison = document.getElementById('avogadro-comparison');
            
            let items, description;
            
            if (value === 0) {
                items = 0;
                description = '0% of a mole';
            } else if (value < 10) {
                items = value * 10;
                description = `${items} items = ${(items / 6.02e23 * 100).toExponential(2)}% of a mole`;
            } else if (value < 50) {
                items = value * 1000;
                description = `${items} items = ${(items / 6.02e23 * 100).toExponential(2)}% of a mole`;
            } else if (value < 80) {
                items = value * 1000000;
                description = `${items} items = ${(items / 6.02e23 * 100).toExponential(2)}% of a mole`;
            } else {
                items = value * 1000000000;
                description = `${items} items = ${(items / 6.02e23 * 100).toExponential(2)}% of a mole`;
            }
            
            comparison.innerHTML = `<p>${items} items = ${description}</p>`;
        });
        
        // Molar Mass Calculator
        document.getElementById('calculate-molar-mass').addEventListener('click', () => {
            const formula = document.getElementById('compound-input').value.trim();
            
            if (!formula) {
                showNotification('Please enter a chemical formula', 'error');
                return;
            }
            
            // Parse the formula (simplified version)
            const elements = {};
            let currentElement = '';
            let currentCount = '';
            
            for (let i = 0; i < formula.length; i++) {
                const char = formula[i];
                
                if (char.match(/[A-Z]/)) {
                    if (currentElement) {
                        const count = currentCount ? parseInt(currentCount) : 1;
                        elements[currentElement] = (elements[currentElement] || 0) + count;
                    }
                    currentElement = char;
                    currentCount = '';
                } else if (char.match(/[a-z]/)) {
                    currentElement += char;
                } else if (char.match(/[0-9]/)) {
                    currentCount += char;
                }
            }
            
            // Add the last element
            if (currentElement) {
                const count = currentCount ? parseInt(currentCount) : 1;
                elements[currentElement] = (elements[currentElement] || 0) + count;
            }
            
            // Calculate molar mass
            let molarMass = 0;
            const steps = [];
            
            for (const [symbol, count] of Object.entries(elements)) {
                const element = periodicTableData.find(e => e.symbol === symbol);
                if (element) {
                    const mass = element.atomicMass * count;
                    molarMass += mass;
                    steps.push(`${count} × ${element.atomicMass.toFixed(2)} (mass of ${symbol}) = ${mass.toFixed(2)} g·mol⁻¹`);
                }
            }
            
            // Display results
            const resultBox = document.getElementById('molar-mass-result');
            const calculationSteps = document.getElementById('calculation-steps');
            const molarMassValue = document.getElementById('molar-mass-value');
            
            calculationSteps.innerHTML = steps.map(step => `<p>${step}</p>`).join('');
            molarMassValue.textContent = `Molar Mass of ${formula} = ${molarMass.toFixed(2)} g·mol⁻¹`;
            
            resultBox.classList.add('show');
            showNotification('Molar mass calculated successfully!', 'success');
        });
        
        // Conversion Calculator
        document.getElementById('conversion-type').addEventListener('change', (e) => {
            const type = e.target.value;
            
            // Hide all converters
            document.querySelectorAll('.converter').forEach(converter => {
                converter.style.display = 'none';
            });
            
            // Show the selected converter
            document.getElementById(`${type}-converter`).style.display = 'block';
        });
        
        // Mass-Moles Conversion
        document.getElementById('convert-mass-moles').addEventListener('click', () => {
            const direction = document.getElementById('conversion-direction').value;
            const mass = parseFloat(document.getElementById('mass-input').value);
            const molarMass = parseFloat(document.getElementById('molar-mass-input').value);
            
            if (isNaN(mass) || isNaN(molarMass)) {
                showNotification('Please enter valid values', 'error');
                return;
            }
            
            let result, calculation;
            
            if (direction === 'to-moles') {
                result = mass / molarMass;
                calculation = `${mass} g ÷ ${molarMass} g·mol⁻¹ = ${result.toFixed(4)} mol`;
            } else {
                result = mass * molarMass;
                calculation = `${mass} mol × ${molarMass} g·mol⁻¹ = ${result.toFixed(4)} g`;
            }
            
            const resultBox = document.getElementById('conversion-result');
            const calculationText = document.getElementById('conversion-calculation');
            
            calculationText.textContent = calculation;
            resultBox.classList.add('show');
            
            showNotification('Conversion complete!', 'success');
        });
        
        // Particles-Moles Conversion
        document.getElementById('convert-particles-moles').addEventListener('click', () => {
            const direction = document.getElementById('conversion-direction').value;
            const particles = parseFloat(document.getElementById('particles-input').value);
            const avogadroNumber = 6.02e23;
            
            if (isNaN(particles)) {
                showNotification('Please enter a valid number of particles', 'error');
                return;
            }
            
            let result, calculation;
            
            if (direction === 'to-moles') {
                result = particles / avogadroNumber;
                calculation = `${particles.toExponential(2)} particles ÷ ${avogadroNumber.toExponential(2)} particles/mol = ${result.toExponential(2)} mol`;
            } else {
                result = particles * avogadroNumber;
                calculation = `${particles} mol × ${avogadroNumber.toExponential(2)} particles/mol = ${result.toExponential(2)} particles`;
            }
            
            const resultBox = document.getElementById('conversion-result');
            const calculationText = document.getElementById('conversion-calculation');
            
            calculationText.textContent = calculation;
            resultBox.classList.add('show');
            
            showNotification('Conversion complete!', 'success');
        });
        
        // Volume-Moles Conversion
        document.getElementById('convert-volume-moles').addEventListener('click', () => {
            const direction = document.getElementById('conversion-direction').value;
            const volume = parseFloat(document.getElementById('volume-input').value);
            const molarVolume = 22.4; // dm³·mol⁻¹ at STP
            
            if (isNaN(volume)) {
                showNotification('Please enter a valid volume', 'error');
                return;
            }
            
            let result, calculation;
            
            if (direction === 'to-moles') {
                result = volume / molarVolume;
                calculation = `${volume} dm³ ÷ ${molarVolume} dm³·mol⁻¹ = ${result.toFixed(4)} mol`;
            } else {
                result = volume * molarVolume;
                calculation = `${volume} mol × ${molarVolume} dm³·mol⁻¹ = ${result.toFixed(4)} dm³`;
            }
            
            const resultBox = document.getElementById('conversion-result');
            const calculationText = document.getElementById('conversion-calculation');
            
            calculationText.textContent = calculation;
            resultBox.classList.add('show');
            
            showNotification('Conversion complete!', 'success');
        });
        
        // Percentage Composition Calculator
        document.getElementById('calculate-percentage').addEventListener('click', () => {
            const formula = document.getElementById('percentage-compound-input').value.trim();
            
            if (!formula) {
                showNotification('Please enter a chemical formula', 'error');
                return;
            }
            
            // Parse the formula (simplified version)
            const elements = {};
            let currentElement = '';
            let currentCount = '';
            
            for (let i = 0; i < formula.length; i++) {
                const char = formula[i];
                
                if (char.match(/[A-Z]/)) {
                    if (currentElement) {
                        const count = currentCount ? parseInt(currentCount) : 1;
                        elements[currentElement] = (elements[currentElement] || 0) + count;
                    }
                    currentElement = char;
                    currentCount = '';
                } else if (char.match(/[a-z]/)) {
                    currentElement += char;
                } else if (char.match(/[0-9]/)) {
                    currentCount += char;
                }
            }
            
            // Add the last element
            if (currentElement) {
                const count = currentCount ? parseInt(currentCount) : 1;
                elements[currentElement] = (elements[currentElement] || 0) + count;
            }
            
            // Calculate molar mass and element percentages
            let molarMass = 0;
            const elementMasses = {};
            
            for (const [symbol, count] of Object.entries(elements)) {
                const element = periodicTableData.find(e => e.symbol === symbol);
                if (element) {
                    const mass = element.atomicMass * count;
                    elementMasses[symbol] = mass;
                    molarMass += mass;
                }
            }
            
            // Calculate percentages
            const percentages = {};
            for (const [symbol, mass] of Object.entries(elementMasses)) {
                percentages[symbol] = (mass / molarMass) * 100;
            }
            
            // Display results
            const resultBox = document.getElementById('percentage-result');
            const breakdown = document.getElementById('percentage-breakdown');
            
            let breakdownHTML = `<p><strong>Molar Mass of ${formula}:</strong> ${molarMass.toFixed(2)} g·mol⁻¹</p>`;
            breakdownHTML += '<p><strong>Percentage Composition:</strong></p>';
            
            for (const [symbol, percentage] of Object.entries(percentages)) {
                breakdownHTML += `<p>${symbol}: ${percentage.toFixed(2)}%</p>`;
            }
            
            breakdown.innerHTML = breakdownHTML;
            resultBox.classList.add('show');
            
            showNotification('Percentage composition calculated successfully!', 'success');
        });
        
        // Quiz Functionality
        const quizAnswers = {
            1: 'A',
            2: 'A',
            3: 'A',
            4: 'A',
            5: 'A',
            6: 'A',
            7: 'A',
            8: 'A'
        };
        
        document.querySelectorAll('.quiz-option').forEach(option => {
            option.addEventListener('click', () => {
                const question = option.getAttribute('data-question');
                const selectedOption = option.getAttribute('data-option');
                
                // Skip if already answered
                if (answeredQuestions.has(question)) {
                    return;
                }
                
                // Mark as answered
                answeredQuestions.add(question);
                
                // Mark selected option
                option.classList.add('selected');
                
                // Check if correct
                const isCorrect = selectedOption === quizAnswers[question];
                
                // Show feedback
                const feedback = document.getElementById(`feedback-${question}`);
                feedback.classList.add('show');
                
                if (isCorrect) {
                    option.classList.add('correct');
                    feedback.classList.add('correct');
                    feedback.innerHTML = '<i class="fas fa-check-circle"></i> Correct! Well done.';
                    quizScore++;
                } else {
                    option.classList.add('incorrect');
                    feedback.classList.add('incorrect');
                    feedback.innerHTML = `<i class="fas fa-times-circle"></i> Incorrect. The correct answer is ${quizAnswers[question]}.`;
                    
                    // Highlight correct answer
                    document.querySelectorAll(`.quiz-option[data-question="${question}"][data-option="${quizAnswers[question]}"]`).forEach(correctOption => {
                        correctOption.classList.add('correct');
                    });
                }
                
                // Update score
                document.getElementById('quiz-score').textContent = `${quizScore}/8`;
                
                // Show notification
                if (isCorrect) {
                    showNotification('Correct answer!', 'success');
                } else {
                    showNotification('Incorrect answer. Review the material and try again.', 'error');
                }
            });
        });
        
        // Reset Quiz
        document.getElementById('reset-quiz').addEventListener('click', () => {
            quizScore = 0;
            answeredQuestions.clear();
            
            document.getElementById('quiz-score').textContent = '0/8';
            
            document.querySelectorAll('.quiz-option').forEach(option => {
                option.classList.remove('selected', 'correct', 'incorrect');
            });
            
            document.querySelectorAll('.quiz-feedback').forEach(feedback => {
                feedback.classList.remove('show', 'correct', 'incorrect');
            });
            
            showNotification('Quiz reset successfully', 'success');
        });
        
        // Mark Objectives Complete
        document.getElementById('mark-objectives-complete').addEventListener('click', () => {
            const objectivesButton = document.querySelector('.collapsible:nth-child(2)');
            
            if (!completedSections.has('objectives')) {
                completedSections.add('objectives');
                objectivesButton.classList.add('completed');
                updateProgress();
                showNotification('Objectives section marked as complete!', 'success');
            } else {
                showNotification('This section is already marked as complete', 'warning');
            }
        });
        
        // Modal
        const modal = document.getElementById('formula-modal');
        const closeModal = document.getElementById('close-modal');
        
        closeModal.addEventListener('click', () => {
            modal.classList.remove('show');
        });
        
        window.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.classList.remove('show');
            }
        });
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            initPeriodicTable();
            
            // Mark introduction as viewed
            completedSections.add('introduction');
            const introButton = document.querySelector('.collapsible:first-child');
            introButton.classList.add('completed');
            updateProgress();
        });
    </script>
</body>
</html>